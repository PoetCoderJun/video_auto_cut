# TODO（实现步骤与计划）

## Phase 0：算法链路验证（最高优先级）
- [x] 定义 ASR 输出统一格式（与 DashScope/Qwen 对齐）
- [x] 复用 AutoCut 片段清洗逻辑到后端工具模块
- [x] 实现 “ASR → 对齐 → 纠错 → SRT → EDL” 自动剪辑链路
- [x] 先用规则/阈值完成自动删减（LLM 可后置）
- [x] 生成成片，验证剪辑结果

## Phase 2：Remotion 统一渲染
- [x] 基础字幕渲染样式
- [x] 章节分段渲染（章节卡 + 进度条雏形）

### 2.1 统一视觉指令协议（喂给 Remotion 的数据契约）
- [ ] 定义 `visual_directives.json`：`emphasis`（重点标注）/ `outline`（章节大纲）/ `beats`（视觉节拍）/ `cards`（信息卡）/ `theme`（频道化 UI）/ `cover`（封面）
- [ ] 在渲染阶段落盘与缓存：输入相同则复用，便于调参迭代与回归

### 2.2 生成视觉指令（AI 优先 + 规则回退）
- [ ] 重点标注生成：每句字幕输出“重点词/短语/数字 + 强调级别 + spans”，失败时用规则（数字/专有名词/停顿）回退
- [ ] 章节大纲生成：每章“一句结论 + 3 bullets”，失败时用章节内句子抽取回退
- [ ] 视觉节拍生成：产出事件时间轴（punch-in、结论卡、步骤 1/2/3、转场提示等），失败时按章节边界/标点/语速规则回退

### 2.3 Remotion 消费指令（把信息变成画面语言）
- [ ] Kinetic captions：逐词/逐短语高亮、关键词变色/描边、数字放大（由 `emphasis` + `beats` 驱动）
- [ ] 信息卡片：结论卡/步骤卡/对比卡/引用卡（由 `outline` + `beats` 驱动）
- [ ] 频道化 UI：统一标题条、章节提示、进度条、角标（由 `theme` 驱动，可配置）

### 2.4 批量产出与运营素材
- [ ] 缩略图与封面：生成多张候选封面（同主题色与标题，基于 `cover` 或关键 `beats`），便于 A/B
- [ ] 渲染调试模式：overlay 输出当前字幕/章节/事件，降低模板迭代成本

## Phase 1：前后端工作台
- [ ] 最小化 API（`/asr` `/auto-edit` `/render`）
- [ ] 极简 Web 页面：分段列表 + 勾选/撤销 + 导出
- [ ] 编辑结果落地为 EDL + 导出参数

## Phase 3：PPT 与模板化（后续）
- [ ] 语义段聚合 + 页面结构
- [ ] PPT 模板渲染 + 画中画布局
